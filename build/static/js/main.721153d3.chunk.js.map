{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","_ref","handleSearchChange","filteredPerson","react_default","a","createElement","onChange","length","concat","name","number","PersonForm","submitPerson","handleNameChange","handleNumberChange","onSubmit","type","Persons","persons","deletePerson","map","person","key","onClick","Notification","notification","message","dynamicStyle","color","className","style","baseUrl","services_persons","getAll","axios","get","then","res","data","postPerson","post","id","delete","updateNumber","put","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","setFilteredPerson","_useState9","_useState10","setNotification","useEffect","personServices","catch","error","objectSpread","setTimeout","components_Notification","components_Filter","e","filtered","filter","toLocaleLowerCase","target","value","components_PersonForm","preventDefault","newPerson","existingPerson","window","confirm","components_Persons","p","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.721153d3.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ handleSearchChange, filteredPerson }) => {\r\n  return (\r\n    <div>\r\n      <p>\r\n        filter shown with <input onChange={handleSearchChange} />\r\n      </p>\r\n      {filteredPerson.length !== 0 &&\r\n        `${filteredPerson[0].name} ${filteredPerson[0].number}`}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({ submitPerson, handleNameChange, handleNumberChange }) => {\r\n  return (\r\n    <form onSubmit={submitPerson}>\r\n      <div>\r\n        name: <input onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input onChange={handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons, deletePerson }) => {\r\n  return (\r\n    <div>\r\n      {persons.map(person => (\r\n        <p key={person.name}>\r\n          {person.name} {person.number}{\" \"}\r\n          <button onClick={() => deletePerson(person)}>delete</button>\r\n        </p>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ notification }) => {\r\n  if (!notification.message) return null;\r\n\r\n  const dynamicStyle =\r\n    notification.type === \"error\" ? { color: \"red\" } : { color: \"green\" };\r\n\r\n  return (\r\n    <div className=\"notification\" style={dynamicStyle}>\r\n      {notification.message}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\n// fetch all the persons\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(res => res.data);\r\n};\r\n\r\n// create a new person\r\nconst postPerson = person => {\r\n  const request = axios.post(baseUrl, person);\r\n  return request.then(res => res.data);\r\n};\r\n\r\n// delete a person by ID\r\nconst deletePerson = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then(res => res.data);\r\n};\r\n\r\n// update the number if the user exists\r\nconst updateNumber = (person, id) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, person);\r\n  return request.then(res => res.data);\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  postPerson,\r\n  deletePerson,\r\n  updateNumber\r\n};\r\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\nimport personServices from \"./services/persons\";\n\nfunction App() {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filteredPerson, setFilteredPerson] = useState([]);\n  const [notification, setNotification] = useState({});\n\n  // fetch initail data\n  useEffect(() => {\n    personServices\n      .getAll()\n      .then(persons => setPersons(persons))\n      .catch(error => {\n        setNotification({\n          ...notification,\n          message: \"Persons not fetched\",\n          type: \"error\"\n        });\n        setTimeout(() => {\n          setNotification({\n            ...notification,\n            message: \"\",\n            type: \"\"\n          });\n        }, 5000);\n      });\n  }, []);\n\n  // change event for name input\n  const handleNameChange = e => {\n    setNewName(e.target.value);\n  };\n\n  // change event for number input\n  const handleNumberChange = e => {\n    setNewNumber(e.target.value);\n  };\n\n  // change event for search input\n  const handleSearchChange = e => {\n    const filtered = persons.filter(\n      person =>\n        person.name.toLocaleLowerCase() === e.target.value.toLocaleLowerCase()\n    );\n    if (filtered.length !== 0) {\n      setFilteredPerson(filtered);\n    }\n  };\n\n  // submit the form\n  const submitPerson = e => {\n    e.preventDefault();\n    const newPerson = { name: newName, number: newNumber };\n    const existingPerson = persons.filter(\n      person => person.name === newPerson.name\n    );\n\n    existingPerson.length !== 0\n      ? window.confirm(\n          `${\n            newPerson.name\n          } is already added to phonebook, replace the old number with a new one?`\n        ) &&\n        personServices\n          .updateNumber(newPerson, existingPerson[0].id)\n          .then(res => {\n            setPersons(\n              persons.map(person => (person.id !== res.id ? person : res))\n            );\n            setNotification({\n              ...notification,\n              message: `Updated ${newPerson.name}'s number`,\n              type: \"success\"\n            });\n            setTimeout(() => {\n              setNotification({\n                ...notification,\n                message: \"\",\n                type: \"\"\n              });\n            }, 5000);\n          })\n          .catch(error => {\n            setNotification({\n              ...notification,\n              message: `Could not updated ${newPerson.name}'s number`,\n              type: \"error\"\n            });\n            setTimeout(() => {\n              setNotification({\n                ...notification,\n                message: \"\",\n                type: \"\"\n              });\n            }, 5000);\n          })\n      : personServices\n          .postPerson(newPerson)\n          .then(res => {\n            setPersons(persons.concat(res));\n            setNotification({\n              ...notification,\n              message: `Added ${newPerson.name}`,\n              type: \"success\"\n            });\n            setTimeout(() => {\n              setNotification({ ...notification, message: \"\", type: \"\" });\n            }, 5000);\n          })\n          .catch(error => {\n            setNotification({\n              ...notification,\n              message: \"could not add person\",\n              type: \"error\"\n            });\n            setTimeout(() => {\n              setNotification({\n                ...notification,\n                message: \"\",\n                type: \"\"\n              });\n            }, 5000);\n          });\n  };\n\n  // delete person\n  const deletePerson = person => {\n    window.confirm(`Delete ${person.name}?`) &&\n      personServices\n        .deletePerson(person.id)\n        .then(res => {\n          setPersons(persons.filter(p => p.id !== person.id));\n\n          setNotification({\n            ...notification,\n            message: `${person.name} is removed from the server`,\n            type: \"success\"\n          });\n          setTimeout(() => {\n            setNotification({\n              ...notification,\n              message: \"\",\n              type: \"\"\n            });\n          }, 5000);\n        })\n        .catch(error => {\n          setNotification({\n            ...notification,\n            message: `Information of ${\n              person.name\n            } has already been removed from the server`,\n            type: \"error\"\n          });\n          setTimeout(() => {\n            setNotification({\n              ...notification,\n              message: \"\",\n              type: \"\"\n            });\n          }, 5000);\n        });\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={notification} />\n      <Filter\n        handleSearchChange={handleSearchChange}\n        filteredPerson={filteredPerson}\n      />\n      <h2>add a new</h2>\n      <PersonForm\n        submitPerson={submitPerson}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} deletePerson={deletePerson} />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}